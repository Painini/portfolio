(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[466],{"8nqx":function(e,t,n){"use strict";n.r(t),n.d(t,"PersistentCodeEditorWrapper",(function(){return PersistentCodeEditorWrapper}));var a=n("ODXe"),l=n("sEfC"),o=n.n(l),c=n("yrBZ"),i=n("QqFe"),s=n("ZK4f"),r=n("q1tI"),u=n.n(r),d=n("/MKj"),b=n("dIjy"),m=n("z9KF"),f=n("c2gB"),O=n("QtoC"),E=n("GwnQ"),p=n("vfkt"),w=n("akuy"),j=n("bCom"),h=n("rL5b"),_=n("wx14"),g=n("b+vN"),F=n("4Te6");const S=n("swBZ").components.code_editor,v={title:S.reset_workspace_confirmation_title,subtitle:S.reset_workspace_confirmation_content},AuthorModal=({fileName:e,closeModal:t})=>{const n=Object(f.c)(),a=n.updateFiles,l=n.openFile;return u.a.createElement(g.a,Object(_.a)({isOpen:!0,cancel:t,action:()=>{const n=new F.a({path:e,content:""});a([n]),l(e),t()}},(e=>({actionText:"Add File",title:`${e} does not exist`,subtitle:`${e} was set as a default file in Author but does not exist in the workspace yet.`}))(e)))},LearnerModal=({fileName:e,closeModal:t})=>{const n=Object(r.useState)(!1),l=Object(a.a)(n,2),o=l[0],c=l[1],i=Object(f.c)().restoreInitialSavepoint,cancelAndClose=()=>{t(),c(!1)};return o?u.a.createElement(g.a,Object(_.a)({isOpen:!0,cancel:cancelAndClose,action:()=>{cancelAndClose(),i()}},v)):u.a.createElement(g.a,Object(_.a)({isOpen:!0,cancel:cancelAndClose,action:()=>c(!0)},(e=>({actionText:"Reset Files",cancelText:"Ok",title:"Whoa there!",subtitle:`${e} has been moved. This will cause problems with this exercise, please move ${e} back to its original location, or reset your files.`}))(e)))},MissingFileModal=({defaultFiles:e})=>{const t=Object(d.useSelector)(O.b),n=Object(r.useState)(!1),l=Object(a.a)(n,2),o=l[0],c=l[1],i=Object(f.c)(),s=i.fileIndex,b=i.submitting;if(o||!s||!b)return null;const m=b.isSubmitting&&b.action===E.c.Reset,p=Object.fromEntries(Object.entries(s).filter((([,e])=>"file"===e))),w=e.find((e=>!p[e]));return m||!w?null:t?u.a.createElement(AuthorModal,{fileName:w,closeModal:()=>c(!0)}):u.a.createElement(LearnerModal,{fileName:w,closeModal:()=>c(!0)})};var k="loader__2h3yLmGmMRU1DEZmVhlSFw",x="codeEditor__1zGkuHOGsgQDqYDvB95kRZ",B=n("ytuh");let R;!function(e){e[e.Hidden=0]="Hidden",e[e.Review=1]="Review",e[e.Solution=2]="Solution"}(R||(R={}));const PersistentCodeEditorWrapper=({config:e,shouldShowCheckWorkButton:t=!1,toggleFullScreen:n})=>{const l=Object(f.c)(),_=l.files,g=l.currentFile,F=l.ready,S=l.openFile,v=l.openFiles,y=l.closeFile,C=l.requestFile,D=l.updateFile,N=l.fetchWorkspace,L=l.submitting,A=l.testResults,T=l.persistWorkspace,G=l.workspaceSlug,M=Object(d.useSelector)(O.b),H=g?null==_?void 0:_[g]:null,q=g&&Boolean(H),K=Object(r.useState)(!1),W=Object(a.a)(K,2),Z=W[0],I=W[1],Q=e.no_run_button;Object(r.useEffect)((()=>{Z&&N()}),[Z,N]),Object(r.useEffect)((()=>{F&&g&&!q&&C(g)}),[g,q,F,C,G]);const $=Object(r.useMemo)((()=>o()(T,2e3)),[T]),z=Object(r.useCallback)((e=>{D(e),$()}),[$,D]),U=(({submitting:e,testResults:t}={})=>{const n=Object(f.c)().workspaceSlug,l=Object(r.useState)(0),o=Object(a.a)(l,2),c=o[0],i=o[1],s=e||{},u=s.isSubmitting,d=s.hasSubmitted;switch(Object(r.useEffect)((()=>{d&&!u&&t&&i(t.pass?0:e=>e+1)}),[u,t,d]),Object(r.useEffect)((()=>{i(0)}),[n]),c){case 0:return R.Hidden;case 1:return R.Review;default:return R.Solution}})({submitting:L,testResults:A}),P=Object(r.useState)(),V=Object(a.a)(P,2),X=V[0],Y=V[1],J=Object(r.useCallback)((()=>{I(!Z)}),[I,Z]),ee=u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,null),u.a.createElement("div",{className:k},u.a.createElement(m.a,null)));if(!F)return ee;const te=u.a.createElement(c.b,{center:!0,column:!0,flexGrow:1,"data-testid":"code-editor-placeholder"},u.a.createElement(s.a,{size:48}),u.a.createElement("div",{style:{marginTop:15}},"Code Editor"),!Z&&u.a.createElement(i.d,{mt:24,onClick:()=>I(!0),variant:"secondary"},"Open file")),ne=v.length?ee:te,ae=e.navigator_disabled&&!M,le=Boolean(!t&&g),oe=!ae&&Z;return u.a.createElement(c.b,{flexDirection:"row",flexGrow:1,maxHeight:"100%"},oe&&u.a.createElement(b.a,{open:!0,toggleLayout:J,controls:M&&u.a.createElement(w.a,{justTheSavepoints:!0})}),e.files&&u.a.createElement(MissingFileModal,{defaultFiles:e.files}),u.a.createElement(c.b,{flexBasis:"0%",flexDirection:"column",flexGrow:1,overflow:"hidden"},u.a.createElement(B.a,{toggleFullScreen:n,canCloseFiles:!ae,canEditFiles:!ae,currentFileName:g,openFiles:v,onOpenFile:S,onCloseFile:y,navOpen:Z,onToggleNav:J}),u.a.createElement(c.b,{column:!0,flexGrow:1},q&&g?u.a.createElement(p.a,{className:x,file:_[g],key:g,onEditorLoad:Y,updateFile:Q?z:D}):ne),u.a.createElement(j.a,{submitMode:E.d.RunAndTest,editor:X,showRunButton:le,showReviewButton:U===R.Review,showSolutionButton:U===R.Solution,showPrettifyButton:!0})))};t.default=PersistentCodeEditorWrapper}}]);
//# sourceMappingURL=LayoutComponents-PersistentCodeEditor~dc7195f0.87fab07b19ded5137327.chunk.js.map